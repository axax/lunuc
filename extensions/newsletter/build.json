{
  "types": [
    {
      "name": "NewsletterSubscriber",
      "noUserRelation": true,
      "entryClonable": true,
      "access":{"read":{"role":"send_newsletter","type": "roleAndUser"}},
      "fields": [
        {
          "name": "email",
          "required": true,
          "clone": "${email}_copy",
          "tab": "general",
          "index": 1
        },
        {
          "name": "state",
          "enum": [
            "optin",
            "subscribed",
            "unsubscribed",
            "invalid"
          ],
          "tab": "general",
          "index": 1
        },
        {
          "name": "language",
          "tab": "general",
          "required": false
        },
        {
          "name": "confirmed",
          "type": "Boolean",
          "tab": "general",
          "index": 1
        },
        {
          "name": "account",
          "type": "User",
          "fields": [
            "username"
          ],
          "index": 1
        },
        {
          "name": "list",
          "multi": true,
          "fullWidth": false,
          "index": 1,
          "tab": "general",
          "type": "NewsletterList",
          "fields": [
            "name"
          ]
        },
        {
          "name": "location",
          "index": 1,
          "hideColumnInTypes": true,
          "compoundIndex": [
            {
              "unique": true,
              "fields": {
                "email": 1,
                "location": 1
              }
            }
          ]
        },
        {
          "name": "token",
          "hideColumnInTypes": true,
          "type": "String"
        },
        {
          "name": "unsubscribeMailing",
          "hideColumnInTypes": true,
          "type": "NewsletterMailing"
        },
        {
          "name": "meta",
          "hideColumnInTypes": true,
          "type": "Object",
          "uitype": "json",
          "tab": "Meta"
        },
        {
          "name": "ownerGroup",
          "hideColumnInTypes": true,
          "type": "UserGroup",
          "multi": true,
          "fields": [
            "name"
          ],
          "index": 1
        }
      ]
    },
    {
      "name": "NewsletterList",
      "fields": [
        {
          "tab": "general",
          "name": "name",
          "required": true,
          "index": 1
        },
        {
          "tab": "general",
          "name": "count",
          "readOnly": true,
          "dynamic": {
            "type": "NewsletterSubscriber",
            "action": "count",
            "query": {
              "list": {
                "$in": [
                  "_id"
                ]
              }
            }
          }
        }
      ]
    },
    {
      "name": "NewsletterMailing",
      "entryClonable": true,
      "fields": [
        {
          "name": "subject",
          "required": true,
          "tab": "general",
          "localized": true,
          "fullWidth": true
        },
        {
          "name": "list",
          "multi": true,
          "fullWidth": true,
          "type": "NewsletterList",
          "fields": [
            "name"
          ],
          "tab": "general"
        },
        {
          "name": "users",
          "type": "User",
          "fullWidth": true,
          "multi": true,
          "fields": [
            "username"
          ],
          "tab": "general"
        },
        {
          "tab": "general",
          "name": "active",
          "description": "Wenn aktiv wird der Versand im Hintergrund ausgeführt",
          "type": "Boolean",
          "index": 1
        },
        {
          "tab": "content",
          "name": "template",
          "description": "Es besteht die Möglichkeit, entweder ein Seitentemplate auszuwählen oder den Inhalt direkt an dieser Stelle einzugeben.",
          "type": "CmsPage",
          "hideColumnInTypes": true
        },
        {
          "tab": "plainContent",
          "name": "text",
          "uitype": "editor",
          "hideColumnInTypes": true,
          "localized": true
        },
        {
          "tab": "content",
          "name": "html",
          "uitype": "html",
          "hideColumnInTypes": true,
          "localized": true
        },
        {
          "tab": "attachment",
          "name": "attachment",
          "type": "Media",
          "localized": true,
          "hideColumnInTypes": true,
          "fields": [
            "name",
            "mimeType",
            "src"
          ],
          "index": 1
        },
        {
          "name": "contextProps",
          "uitype": "json",
          "hideColumnInTypes": true,
          "localized": false
        },
        {
          "name": "unsubscribeHeader",
          "type": "Boolean",
          "index": 1
        },
        {
          "tab": "send",
          "name": "batchSize",
          "hideColumnInTypes": true,
          "type": "Float"
        },
        {
          "tab": "send",
          "name": "perHour",
          "hideColumnInTypes": true,
          "type": "Float"
        },
        {
          "tab": "send",
          "name": "host",
          "hideColumnInTypes": true
        },
        {
          "tab": "send",
          "name": "language",
          "hideColumnInTypes": true
        },
        {
          "name": "mailSettings",
          "type": "Object",
          "hideColumnInTypes": true,
          "uitype": "json",
          "tab": "Optional"
        }
      ]
    },
    {
      "name": "NewsletterSent",
      "noUserRelation": true,
      "fields": [
        {
          "name": "subscriber",
          "type": "NewsletterSubscriber",
          "index": 1,
          "fields": [
            "email"
          ]
        },
        {
          "name": "userAccount",
          "type": "User",
          "index": 1,
          "fields": [
            "username"
          ]
        },
        {
          "name": "mailing",
          "type": "NewsletterMailing",
          "index": 1,
          "fields": [
            "subject"
          ]
        },
        {
          "name": "mailResponse",
          "type": "Object"
        },
        {
          "name": "openedAt",
          "type": "Float",
          "uitype": "datetime",
          "index": 1
        }
      ]
    },
    {
      "name": "NewsletterTracking",
      "noUserRelation": true,
      "fields": [
        {
          "name": "subscriber",
          "type": "NewsletterSubscriber",
          "fields": [
            "email"
          ],
          "index": 1
        },
        {
          "name": "mailing",
          "type": "NewsletterMailing",
          "fields": [
            "subject"
          ],
          "index": 1
        },
        {
          "name": "url",
          "type": "String",
          "index": 1
        }
      ]
    }
  ]
}
