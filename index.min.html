<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5">
    <meta name="theme-color" content="${APP_COLOR}">
    <link rel="manifest" href="/manifest.json?v=${BUILD_NUMBER}">
    <link rel="apple-touch-icon" href="/favicon-192x192.png">
    <style>
     /*   #app:empty {height: 4px;left: -100%;width: 100%;position: fixed;background: #2980b9;animation: l 1.3s linear infinite;animation-delay: 0.5s;}
        #app:empty:before {position: fixed;left:0;top:20px;width:100%;text-align: center;content: 'loading...'}
        @keyframes l {from {left: -100%;} to {left: 100%;}}*/
    </style>
</head>
<body>

<div id="app">Javascript is not supported</div>
<script>
    document.getElementById('app').innerHTML=''
    if( !window.Map){
        document.write('<scr'+'ipt type="text/javascript" src="https://polyfill.io/v3/polyfill.min.js?features=Set%2CMap"></sc'+'ript>')
    }
    _app_ = {tr:{},trLoaded:false,start: new Date(),detectLang:true}
    if( localStorage.getItem('token') ) {
        var l = window.location.pathname.split('/')[1]
        if (!l || l.length !== 2) {
            if (!_app_.langBefore) {
                l = (navigator.language || navigator.userLanguage).substr(0, 2)
            } else {
                l = '${DEFAULT_LANGUAGE}'
            }
        } else {
            l = l.toLowerCase()
        }

        _app_.lang = l
        var s = document.createElement('script')
        s.onload = function () {
            _app_.trLoaded = true
            if (_app_.trCallback) _app_.trCallback()
        }
        s.setAttribute('src', '/' + l + '.tr.js?v=${BUILD_NUMBER}')
        document.head.appendChild(s)
    }else{
        _app_.trLoaded = true
    }
</script>
<script async src="/main.bundle.js?v=${BUILD_NUMBER}"></script>
</body>
</html>
